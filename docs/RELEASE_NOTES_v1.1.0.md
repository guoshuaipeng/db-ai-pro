# DB-AI v1.1.0 发布说明

**发布日期**：2025-12-10

---

## 🎉 三大核心更新

### 1️⃣ 🚀 服务器端分页查询

**告别内存溢出，轻松处理百万级数据！**

- 每页仅加载 50 行，内存占用降低 95%
- 支持翻页：首页、上一页、下一页、末页
- 可调整每页显示行数（10-1000 行）
- 自动添加 LIMIT 100 保护，防止意外查询大量数据

**示例**：
```sql
-- 查询大表
SELECT * FROM users  -- 自动添加 LIMIT 100

-- 查看分页信息
第 1/30 页 (显示 1-50 行，共 1500 行)
[首页] [上一页] 第 1 / 30 页 [下一页] [末页]
```

---

### 2️⃣ 🔍 智能缓存与快速启动

**启动速度提升 10 倍！**

- SQLite 缓存数据库和表列表
- 展开过的数据库自动缓存
- 下次启动即时显示，无需等待
- 后台自动刷新，保持数据最新

**体验**：
```
之前：启动后等待 5-10 秒加载数据
现在：启动后 0.5 秒即可使用 ⚡
```

---

### 3️⃣ 🗄️ 完整的数据库管理

**从创建到删除，一站式管理！**

#### 新建数据库
- 右键连接 → "🗄️ 新建数据库"
- 选择字符集（utf8mb4 推荐）
- 选择排序规则（utf8mb4_unicode_ci 推荐）
- 现代美观的对话框界面

#### 删除数据库
- 右键数据库 → "🗑️ 删除数据库"
- 三重安全确认（防误删）
- 需要输入数据库名称验证
- 自动清理树视图

#### 新建表
- 右键数据库 → "📝 新建表"
- 跳转到 AI 建表页面
- 自动选择当前数据库

---

## 📊 性能对比

| 功能 | v1.0 | v1.1 | 提升 |
|------|------|------|------|
| 应用启动 | 5-10 秒 | < 1 秒 | **10x** ⬆️ |
| 查询 10 万行表 | OOM | 流畅 | **无限** ⬆️ |
| 展开数据库 | 2-5 秒 | 即时 | **即时** ⬆️ |

---

## ✨ UI 优化亮点

### Toast 通知
- ✅ 非阻塞消息提示
- ✨ 平滑淡入淡出动画
- 🎨 macOS 风格半透明设计

### 查询动画
- 🔄 查询开始：表格淡出 + 加载提示
- ✨ 查询完成：表格淡入 + 数据刷新

### 新建数据库
- 🎨 现代卡片式设计
- 💡 智能推荐配置
- 📝 清晰的表单布局

---

## 🛡️ 安全增强

### 数据保护
- 密码加密存储（Fernet）
- 敏感数据不记录日志
- 配置文件权限控制

### 误操作防护
- 删除数据库需三重确认
- 输入数据库名称验证
- 默认选中"取消"按钮

---

## 📖 快速开始

### 体验分页查询

1. 双击任意表（行数 > 50）
2. 查看底部分页控件
3. 点击"下一页"查看更多数据
4. 调整"每页显示"行数

### 创建数据库

1. 右键连接节点
2. 选择"🗄️ 新建数据库"
3. 输入数据库名称
4. 选择推荐的字符集配置
5. 点击"✓ 创建数据库"

### 体验快速启动

1. 展开几个数据库节点
2. 关闭应用
3. 重新打开
4. ⚡ 之前展开的数据库和表即时显示！

---

## 🔧 配置升级

首次启动 v1.1.0 时：

1. **自动迁移**：
   - 旧的 JSON 配置自动迁移到 SQLite
   - 原 JSON 文件重命名为 `.backup`

2. **无需操作**：
   - 连接配置保持不变
   - 提示词配置保持不变
   - 所有设置自动迁移

3. **备份建议**：
   - 迁移前建议备份 `~/.db-ai/` 目录
   - `.backup` 文件可保留作为备份

---

## 💡 贴心提示

### 分页查询最佳实践

```sql
✅ 推荐：让系统自动添加 LIMIT
SELECT * FROM orders WHERE status = 'pending'

✅ 推荐：使用分页控件翻页
第 1 页 → 第 2 页 → 第 3 页

⚠️ 注意：自定义大 LIMIT 会影响性能
SELECT * FROM orders LIMIT 100000  -- 谨慎使用
```

### 缓存优化建议

- 首次使用时展开常用的数据库
- 缓存会自动保存，下次启动即时加载
- 后台会自动刷新，无需手动操作

### 字符集推荐

**MySQL/MariaDB**：
- 新数据库：`utf8mb4` + `utf8mb4_unicode_ci`
- 旧系统兼容：`utf8` + `utf8_general_ci`

**PostgreSQL**：
- 推荐：`UTF8`

**SQL Server**：
- 中文应用：`Chinese_PRC_CI_AS`
- 国际应用：`Latin1_General_CI_AS`

---

## 🎁 彩蛋功能

### 隐藏的快捷操作

- **双击标签页标题**：复制完整 SQL
- **点击表头列名**：复制列名到剪贴板
- **右键单元格**：
  - 复制单元格值
  - 生成 UPDATE SQL
  - 生成 DELETE SQL
  - 查看 JSON 格式

---

## 📚 相关文档

- **完整更新日志**：[CHANGELOG_v1.1.0.md](./CHANGELOG_v1.1.0.md)
- **用户手册**：[USER_GUIDE.md](./USER_GUIDE.md)
- **API 文档**：[API_REFERENCE.md](./API_REFERENCE.md)

---

## 🎊 感谢使用 DB-AI！

如有任何问题或建议，欢迎反馈！

**Happy Querying! 🚀**


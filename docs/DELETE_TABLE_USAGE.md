# 删除表功能使用指南

## 快速开始

### 第一步：右键点击表节点

在数据库树形视图中，找到要删除的表，右键点击：

```
📁 MySQL连接1
  └─ 📂 test_database
      └─ 📋 表
          ├─ 📊 users          ← 右键点击这里
          ├─ 📊 orders
          └─ 📊 products
```

### 第二步：选择"删除表"

在弹出的右键菜单中选择：

```
┌────────────────────────┐
│ 在新标签页中查询       │
│ ──────────────────────  │
│ 编辑表结构             │
│ ──────────────────────  │
│ 复制结构               │
│ ──────────────────────  │
│ 🗑️ 删除表              │ ← 点击这里
│ ──────────────────────  │
│ 刷新                   │
└────────────────────────┘
```

### 第三步：第一次确认

系统会弹出确认对话框：

```
┌─────────────────────────────────────┐
│  确认删除                           │
├─────────────────────────────────────┤
│                                     │
│  确定要删除表 test_database.users 吗？│
│                                     │
│  ⚠️ 警告：此操作将删除表中的所有数据，│
│          且无法恢复！              │
│                                     │
├─────────────────────────────────────┤
│              [Yes]  [No]            │
└─────────────────────────────────────┘
```

点击 **[Yes]** 继续

### 第四步：第二次确认（安全验证）

输入表名以确认删除：

```
┌─────────────────────────────────────┐
│  二次确认                           │
├─────────────────────────────────────┤
│                                     │
│  请输入表名称 users 以确认删除：    │
│                                     │
│  ┌─────────────────────────────┐   │
│  │ users                       │   │ ← 输入表名
│  └─────────────────────────────┘   │
│                                     │
├─────────────────────────────────────┤
│              [OK]  [Cancel]         │
└─────────────────────────────────────┘
```

输入正确的表名，点击 **[OK]**

### 第五步：删除完成

系统执行删除操作并显示结果：

- 📊 状态栏显示：`正在删除表 'test_database.users'...`
- ✅ 成功后显示：`表 'users' 已删除`
- 🗂️ 表节点自动从树形视图中移除

## ⚠️ 重要提示

### 删除前的检查清单

- [ ] 确认这是正确的表
- [ ] 确认已备份重要数据
- [ ] 确认没有其他表依赖此表（外键约束）
- [ ] 确认应用程序不再使用此表
- [ ] 确认有权限执行删除操作

### 无法撤销

```
┌─────────────────────────────────────┐
│           ⚠️ 特别警告                │
├─────────────────────────────────────┤
│                                     │
│  删除表是不可逆的操作！             │
│                                     │
│  一旦执行：                         │
│  • 表结构将被删除                   │
│  • 所有数据将丢失                   │
│  • 无法恢复                         │
│                                     │
│  请务必在删除前备份！               │
│                                     │
└─────────────────────────────────────┘
```

## 🚫 取消删除

您可以在以下任何时刻取消删除操作：

### 方式1：第一次确认时点击 [No]

```
┌─────────────────────────────────────┐
│              [Yes]  [No]  ← 点击这里 │
└─────────────────────────────────────┘
```

### 方式2：第二次确认时点击 [Cancel]

```
┌─────────────────────────────────────┐
│         [OK]  [Cancel]  ← 点击这里   │
└─────────────────────────────────────┘
```

### 方式3：输入错误的表名

如果输入的表名不匹配，系统会显示：

```
┌─────────────────────────────────────┐
│  取消                               │
├─────────────────────────────────────┤
│                                     │
│  表名称不匹配，已取消删除操作       │
│                                     │
├─────────────────────────────────────┤
│              [OK]                   │
└─────────────────────────────────────┘
```

## 💡 使用技巧

### 技巧1：查看表信息后再删除

建议先右键点击"在新标签页中查询"，查看表数据，确认后再删除。

### 技巧2：复制结构后再删除

如果需要保留表结构，可以先"复制结构"，再删除表。

### 技巧3：删除前导出数据

如果担心误删，可以先导出表数据为CSV/Excel。

### 技巧4：生产环境谨慎操作

建议在生产环境：
1. 先在测试环境验证
2. 选择业务低峰期操作
3. 提前通知相关团队
4. 准备回滚方案

## 🔧 故障排除

### 问题1：提示"权限不足"

**原因**：数据库用户没有DROP TABLE权限

**解决方案**：
```sql
-- MySQL
GRANT DROP ON database.* TO 'username'@'host';

-- PostgreSQL
GRANT DROP ON TABLE table_name TO username;
```

### 问题2：提示"表被外键引用"

**原因**：其他表的外键引用了此表

**解决方案**：
1. 先删除引用此表的外键约束
2. 或者先删除引用此表的表
3. 或者使用CASCADE选项（需要修改代码）

### 问题3：删除后表还在

**原因**：可能是树形视图缓存问题

**解决方案**：
1. 右键点击数据库节点
2. 选择"刷新"
3. 检查表是否真的被删除

### 问题4：连接断开

**原因**：网络问题或数据库服务器重启

**解决方案**：
1. 检查网络连接
2. 重新连接数据库
3. 重试删除操作

## 📊 支持的数据库

| 数据库 | 支持情况 | DROP语法 |
|--------|---------|----------|
| MySQL | ✅ 完全支持 | DROP TABLE \`table\` |
| MariaDB | ✅ 完全支持 | DROP TABLE \`table\` |
| PostgreSQL | ✅ 完全支持 | DROP TABLE "table" |
| SQL Server | ✅ 完全支持 | DROP TABLE [table] |
| SQLite | ✅ 完全支持 | DROP TABLE "table" |
| Oracle | ✅ 完全支持 | DROP TABLE "table" |

## 🔗 相关功能

- [编辑表结构](./EDIT_TABLE_STRUCTURE.md)
- [复制表结构](./COPY_TABLE_STRUCTURE.md)
- [删除数据库](./DELETE_DATABASE_FEATURE.md)
- [新建表](./CREATE_TABLE.md)

## 📞 需要帮助？

如果遇到问题，可以：

1. 查看详细文档：[DELETE_TABLE_FEATURE.md](./DELETE_TABLE_FEATURE.md)
2. 联系作者：codeyG (550187704@qq.com)
3. 提交Issue：[GitHub Issues](https://github.com/your-repo/issues)

---

**提示**：删除操作不可逆，请谨慎使用！建议养成定期备份的好习惯。

